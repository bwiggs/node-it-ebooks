// Generated by CoffeeScript 1.7.1
(function() {
  var ItEbooks, http;

  http = require('http');

  ItEbooks = (function() {
    var get;

    function ItEbooks() {}

    ItEbooks.prototype.baseUrl = 'http://it-ebooks-api.info/v1';

    get = function(path, callback) {
      var requestString;
      requestString = this.baseUrl + path;
      console.log('GET ' + requestString);
      return http.get(requestString, function(res) {
        var body;
        body = '';
        res.on('data', function(chunk) {
          return body += chunk;
        });
        return res.on('end', function() {
          return callback(JSON.parse(body));
        });
      });
    };

    ItEbooks.prototype.search = function(query, callback) {
      if (!query) {
        throw new Error('must provide a search query');
      }
      if (!callback) {
        throw new Error('must provide a callback');
      }
      return this.get('/search/' + query, callback);
    };

    ItEbooks.prototype.book = function(bookId, callback) {
      if (!bookId) {
        throw new Error('must provide a book id');
      }
      return this.get('/book/' + bookId, callback);
    };

    return ItEbooks;

  })();

  module.exports = new ItEbooks;

}).call(this);
